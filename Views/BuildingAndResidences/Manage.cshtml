@using BuildingSiteManagementWebApp.Common.Constants
@using static BuildingSiteManagementWebApp.Controllers.BuildingAndResidencesController
@model ResidenceModelPackage
@{
    ViewData["Title"] = @ViewBag.BuildingName + " " + @TextsLang.Residences;
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<h4>@ViewBag.BuildingName @TextsLang.Residences</h4>
<form method="post" asp-action="Manage" asp-controller="BuildingAndResidences">
    <table class="table table-striped">
        <thead>
            <tr>
                <th>@TextsLang.Floor</th>
                <th>@TextsLang.DoorNo</th>
                <th>@TextsLang.ResidenceType</th>
                <th>@TextsLang.Occupator</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var residence in Model.ViewModels)
            {
                <tr>
                    <td>@residence.Floor</td>
                    <td>@residence.DoorNo</td>
                    <td>@residence.ResidenceType</td>
                    <td>@(residence.Owner == null ? TextsLang.OwnerInfoMissing : residence.User == null ? TextsLang.Empty : residence.OwnerId == residence.UserId ? TextsLang.Self : TextsLang.Tenant)</td>
                    <td>
                        <a class="btn btn-primary" asp-controller="BuildingAndResidences" asp-action="ResidenceDetails" asp-route-residenceId="@residence.Id">@TextsLang.Details</a>
                    </td>
                </tr>

            }

        </tbody>

    </table>
</form>
<form method="post" asp-action="AddResidence" asp-route-buildingId="@ViewBag.buildingId" asp-controller="BuildingAndResidences">
    <table class="table table-striped">
        <thead>
            <tr>
                <th>@TextsLang.Floor</th>
                <th>@TextsLang.DoorNo</th>
                <th>@TextsLang.ResidenceType</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>
                    <input name="Floor" asp-for="InputModel.Floor" class="form-control" asp-validation-for="InputModel.Floor" />
                </td>
                <td>
                    <input name="DoorNo" asp-for="InputModel.DoorNo" class="form-control" asp-validation-for="InputModel.DoorNo" />
                </td>
                <td>
                    <input name="ResidenceType" asp-for="InputModel.ResidenceType" class="form-control" asp-validation-for="InputModel.ResidenceType" />
                </td>
                <td>
                    <button type="submit" class="btn btn-primary">@TextsLang.Add</button>
                </td>
            </tr>
        </tbody>

    </table>
</form>